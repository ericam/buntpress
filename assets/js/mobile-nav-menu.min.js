window.MobileNavMenu={},function(window,$,that){that.init=function(){that.cache(),that.meetsRequirements()&&that.bindEvents()},that.cache=function(){that.$c={window:$(window),body:$("body"),mobileNavMenuContainer:$(".mobile-nav-menu"),menuItemCount:$(".mobile-nav-menu .mobile-nav > li").length}},that.bindEvents=function(){that.$c.menuItemCount<=5||(that.replaceLastMenuItem(),that.$c.body.on("click",".mobile-menu-more-link",that.displayMoreItems),that.$c.body.on("click",".mobile-nav-menu .menu-item-has-children > a",that.setSecondClick),that.$c.body.on("click",".close-mobile-menu",that.hideMoreItems))},that.meetsRequirements=function(){return that.$c.mobileNavMenuContainer.length},that.replaceLastMenuItem=function(){$(".mobile-nav-menu .mobile-nav > li:nth-child(4)").after('<li class="mobile-menu-more-link"><a href="#"><span><i class="more-icon"></i>More</span></a></li>');var boundary=$(".mobile-nav-menu .mobile-nav > li:nth-child(6)");$('<ul class="menu mobile-nav-menu-hidden">').insertAfter(boundary.parent()).append(boundary.nextAll().andSelf())},that.displayMoreItems=function(event){return event.preventDefault(),that.$c.body.hasClass("mobile-menu-more")&&!that.$c.body.hasClass("sub-menu-more")?void that.removeMenuClasses():(that.removeMenuClasses(),that.$c.mobileNavMenuContainer.toggleClass("more"),void that.$c.body.toggleClass("mobile-menu-more"))},that.setSecondClick=function(event){$(this).parent("li").hasClass("visible")||event.preventDefault(),that.removeMenuClasses(),$(this).parent("li").toggleClass("visible"),that.$c.mobileNavMenuContainer.toggleClass("more"),that.$c.body.toggleClass("mobile-menu-more sub-menu-more")},that.hideMoreItems=function(){that.removeMenuClasses()},that.removeMenuClasses=function(){that.$c.body.removeClass("mobile-menu-more sub-menu-more"),that.$c.mobileNavMenuContainer.removeClass("more"),$(".menu-item-has-children").removeClass("visible")},$(that.init)}(window,jQuery,window.MobileNavMenu);